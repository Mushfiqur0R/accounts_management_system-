{% extends "base.html" %}

{% block title %}Import Transactions from CSV{% endblock %}
{% block page_header %}Import Transactions CSV{% endblock %}

{% block content %}
<div class="summary-card" style="max-width: 800px; margin: 20px auto;">
    <h3>Upload Transaction Data</h3>
    <p>Please upload a CSV file with the following columns. The order of columns in your file does not matter, but the **header names must match** these exactly (case-insensitive).</p>
    <hr style="margin: 15px 0;">
    
    <h4>Required Columns:</h4>
    <ul>
        <li><strong>Client Name</strong> (Must match an existing client name exactly)</li>
        <li><strong>Date</strong> (Format: YYYY-MM-DD)</li>
        <li><strong>Transaction Mode</strong> (e.g., Cash, Cheque)</li>
        <li><strong>Debit</strong> (Numeric, use 0 if not applicable)</li>
        <li><strong>Credit</strong> (Numeric, use 0 if not applicable)</li>
    </ul>

    <h4 style="margin-top:15px;">Optional Columns:</h4>
    <ul>
        <li>Fabrics Type</li>
        <li>Design Code</li>
        <li>Qty</li>
        <li>Narration</li>
        <li>Chq No.</li>
        <li>Challan/Voucher No.</li>
    </ul>

    <hr style="margin: 15px 0;">

    <form method="post" enctype="multipart/form-data">
        <div>
            <label for="file">Select CSV File:</label>
            <input type="file" name="file" id="file" accept=".csv" required style="padding: 10px; border: 1px solid #ccc; border-radius: 4px; background-color: #f9f9f9;">
        </div>
        <div style="margin-top:20px;">
            <button type="submit" class="button"><i class="fas fa-file-import"></i> Upload and Import</button>
        </div>
    </form>
</div>

<div class="summary-card" style="max-width: 800px; margin: 20px auto;">
    <h4>Notes:</h4>
    <ul>
        <li>Transactions will be linked to clients based on 'Client Name'. If a client is not found, the row will be skipped.</li>
        <li>Basic validation is performed. Rows with missing critical data or formatting issues will be skipped.</li>
        <li>A summary of imported and skipped rows will be shown after processing.</li>
        <li>For large files, this process might take some time.</li>
    </ul>
</div>
{% endblock %}